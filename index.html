<!DOCTYPE html>
<html lang="en">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
  />
  <head>
    <meta charset="utf-8" />
    <title>My first three.js app</title>
    <style>
      body {
        margin: 0;
        display: flex;
        position: relative;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow: hidden; /* Garante que a máscara não cause barras de rolagem */
      }

      #info-box {
        position: absolute; /* Permite posicioná-la com 'top' e 'left' */
        z-index: 100; /* Garante que a caixa fique acima de outros elementos na cena */
        padding: 10px;
        background-color: rgba(
          0,
          0,
          0,
          0.7
        ); /* Fundo semi-transparente para que seja visível */
        color: white;
        border-radius: 5px;
        border: 1px solid #000;
        display: none; /* Começa escondida, o JavaScript irá mostrá-la */
        pointer-events: none; /* Permite que os cliques passem pela caixa, para que você possa interagir com outros elementos */
      }

      #janelaRender {
        /* Garante que o contêiner da cena ocupa 100% da tela */
        width: 100%;
        height: 100%;
        overflow: hidden; /* Evita barras de rolagem */
        position: relative; /* Importante para o posicionamento dos filhos */
        display: block;
      }

      #navegar {
        /* Posiciona o botão de forma fixa em relação à tela */
        position: absolute;
        bottom: 20px; /* 20px de distância do rodapé */
        left: 20px; /* POSIÇÃO ALTERADA: 20px de distância da borda esquerda */
        padding: 10px 20px;
        border: none;
        background-color: #007bff;
        color: white;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        transition: all 0.3s ease-out;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      }

      #toggleCamera {
        /* Posiciona o botão de forma fixa em relação à tela */
        position: absolute;
        bottom: 20px; /* 20px de distância do rodapé */
        right: 20px; /* POSIÇÃO ALTERADA: 20px de distância da borda esquerda */
        padding: 10px 20px;
        border: none;
        background-color: gold;
        color: white;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        transition: all 0.3s ease-out;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      }

      #navegar:hover {
        background-color: #0056b3; /* Cor mais escura ao passar o mouse */
        transition: all 0.1s ease-out;
      }

      #navegar:active {
        /* Estado ativo (clicado) */
        transition: all 0.1s ease-out;
        transform: translateY(2px) scale(0.95); /* Achata um pouco o botão */
        box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2); /* Sombra mais suave */
        background-color: #004085; /* Cor ainda mais escura ao clicar */
      }

      #info {
        position: absolute;
        top: 100px;
        width: 100%;
        text-align: center;
        z-index: 100;
        color: aqua;
        display: block;
      }

      #startButton {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 101; /* Maior que a overlay para ser clicável */
        font-size: 20px;
        padding: 15px 30px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background-color: #007bff;
        color: white;
        transition: 1s ease 1;
      }

      /* NOVO: Estilo para a div de cobertura */
      #cover-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: white; /* Cor da área que cobre */
        z-index: 99; /* Fica abaixo do botão, mas acima do canvas */

        /* NOVO: Usando mask-image para criar o buraco */
        -webkit-mask-image: radial-gradient(
          circle at 50% 50%,
          transparent 0px,
          transparent 100px,
          black 100px
        );
        mask-image: radial-gradient(
          circle at 50% 50%,
          transparent 0px,
          transparent 100px,
          black 50px
        );
      }

      #loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #222;
        color: #fff;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: sans-serif;
        font-size: 2em;
        z-index: 1000;
        transition: opacity 1s ease-in-out;
      }

      #progress-container {
        width: 200px;
        height: 10px;
        background-color: #555;
        border-radius: 5px;
        margin-top: 10px;
      }

      #progress-bar {
        height: 100%;
        background-color: #4caf50;
        width: 0%;
        border-radius: 5px;
        transition: width 0.2s ease-out;
      }

      #loading-progress {
        margin-top: 10px;
        font-size: 1.5em;
      }

      #cover-overlay.circle {
        border-radius: 50%;
        transform: scale(0);
        background-color: transparent;
        border: 1px solid red;
      }
    </style>
  </head>
  <body>
    <div id="info">Description</div>
    <div id="info-box">
      <p id="info-text"></p>
    </div>
    <div id="loading-overlay">
      <p>Carregando...</p>
      <div id="progress-container">
        <div id="progress-bar"></div>
      </div>
      <p id="loading-progress">0%</p>
    </div>
    <button id="startButton">Iniciar</button>
    <div id="cover-overlay"></div>
    <audio id="background-music" src="public/sound/bgsound.mp3" loop></audio>
    <div id="janelaRender">
      <button id="navegar">Navegar</button>
      <button id="toggleCamera">Trocar Câmera</button>
    </div>
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
        }
      }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script type="module" src="main.js"></script>
  </body>
</html>
